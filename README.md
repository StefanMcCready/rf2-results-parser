# rFactor 2 Results Parser
This is a small package that will allow you to transform a results file generated by the popular racing sim, rFactor2.

As of today the file generated is given to us a very heavy XML document, which is usable, but at the same time probably gives us more information than we need at any given time.

This utility will allow you to pass in a results file and it will parse it into a usable JSON format for you whilst also getting rid of any cruff you may not need right away.

## Installation

**NPM**
```
npm install rf2-session-parser --save
```

**Yarn**
```
yarn add rf2-session-parser
```

## Usage

**Import (CommonJS)**
```
const parseResults = require('rf2-results-parser');
```

**Import (ES6)**
```
import { parseResults } from 'rf2-results-parser';
```

**Using the funtion**

How you supply it the file is up to you, but chances are you will be using it within an API. Here is an example when using Node's FS module:
```
fs.readFile('./race-example.xml', (err, data) => {
  const resultsData = parseResults(data);
  console.log(parsedData);
});

```

For now the function only takes 1 arguement which is the data from the file you supply. An arguement for certain options will be added in due course.

## Response

Here is an example response for a qualifying session:

```
{ event: 
   { name: 'GPVWC SL Lights Round 7',
     location: 'Istanbul Park (2019)',
     session: 'Race' },
  result: 
   [ { position: '1',
       name: 'Cristian Pasqual',
       team: 'TR Bluvos Motorsport',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:28.205',
       lapsCompleted: '47',
       gapToFirst: null,
       pitstops: '2' },
     { position: '2',
       name: 'Mark Hutchinson',
       team: 'Idos Motorsport',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:28.599',
       lapsCompleted: '47',
       gapToFirst: '00:00:00.393',
       pitstops: '2' },
     { position: '3',
       name: 'Laurent Keersmaekers',
       team: 'Holland Racing Team',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:36.392',
       lapsCompleted: '47',
       gapToFirst: '00:00:08.186',
       pitstops: '2' },
     { position: '4',
       name: 'Michi Hoyer',
       team: 'Red Arrow Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:41.912',
       lapsCompleted: '47',
       gapToFirst: '00:00:13.707',
       pitstops: '2' },
     { position: '5',
       name: 'Matthew Williams ',
       team: 'Red Arrow Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:45.566',
       lapsCompleted: '47',
       gapToFirst: '00:00:17.361',
       pitstops: '2' },
     { position: '6',
       name: 'Noah Chilla',
       team: 'Cenobite Motorsports',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:51.476',
       lapsCompleted: '47',
       gapToFirst: '00:00:23.271',
       pitstops: '2' },
     { position: '7',
       name: 'Matthew Clipp',
       team: 'Scuderia Clay Geeli',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:05.398',
       lapsCompleted: '47',
       gapToFirst: '00:00:37.192',
       pitstops: '2' },
     { position: '8',
       name: 'Johan Lindberg ',
       team: 'STAX Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:08.354',
       lapsCompleted: '47',
       gapToFirst: '00:00:40.149',
       pitstops: '2' },
     { position: '9',
       name: 'Tom Parker',
       team: 'Satellite Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:11.651',
       lapsCompleted: '47',
       gapToFirst: '00:00:43.446',
       pitstops: '2' },
     { position: '10',
       name: 'Pedro Moura',
       team: 'Cenobite Motorsports',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:11.986',
       lapsCompleted: '47',
       gapToFirst: '00:00:43.781',
       pitstops: '2' },
     { position: '11',
       name: 'Adrian Faber',
       team: 'Idos Motorsport',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:12.418',
       lapsCompleted: '47',
       gapToFirst: '00:00:44.213',
       pitstops: '2' },
     { position: '12',
       name: 'Ivan Leonov',
       team: 'CM-Tech Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:13.366',
       lapsCompleted: '47',
       gapToFirst: '00:00:45.161',
       pitstops: '2' },
     { position: '13',
       name: 'Rauno Muru',
       team: 'TTF Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:13.398',
       lapsCompleted: '47',
       gapToFirst: '00:00:45.192',
       pitstops: '2' },
     { position: '14',
       name: 'Danny van der Niet ',
       team: 'Netrex GP',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:18.451',
       lapsCompleted: '47',
       gapToFirst: '00:00:50.246',
       pitstops: '2' },
     { position: '15',
       name: 'Bastian Paisler',
       team: 'Holland Racing Team',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:19.345',
       lapsCompleted: '47',
       gapToFirst: '00:00:51.140',
       pitstops: '2' },
     { position: '16',
       name: 'James Early',
       team: 'Royal Blue Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:21.638',
       lapsCompleted: '47',
       gapToFirst: '00:00:53.433',
       pitstops: '2' },
     { position: '17',
       name: 'Haydn Rhodes',
       team: 'TR Bluvos Motorsport',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:28.988',
       lapsCompleted: '47',
       gapToFirst: '00:01:00.783',
       pitstops: '2' },
     { position: '18',
       name: 'Jukkapekka Lalu',
       team: 'Netrex GP',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:34.735',
       lapsCompleted: '47',
       gapToFirst: '00:01:06.530',
       pitstops: '2' },
     { position: '19',
       name: 'Indrek Reemets',
       team: 'CM-Tech Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:42.360',
       lapsCompleted: '47',
       gapToFirst: '00:01:14.155',
       pitstops: '2' },
     { position: '20',
       name: 'Matthew Marquard',
       team: 'STAX Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:49.958',
       lapsCompleted: '47',
       gapToFirst: '00:01:21.753',
       pitstops: '2' },
     { position: '21',
       name: 'April Carlsvard',
       team: 'Cosmo Seiki Japan',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:50.336',
       lapsCompleted: '47',
       gapToFirst: '00:01:22.131',
       pitstops: '2' },
     { position: '22',
       name: 'Matt Richards ',
       team: 'Draig Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:08:50.856',
       lapsCompleted: '47',
       gapToFirst: '00:01:22.651',
       pitstops: '4' },
     { position: '23',
       name: 'Ben Horrill',
       team: 'TTF Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: 'DNF',
       lapsCompleted: '46',
       gapToFirst: 'DNF',
       pitstops: '2' },
     { position: '24',
       name: 'Heigo Poom',
       team: 'Mayor Downard Racing Team',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:33.234',
       lapsCompleted: '46',
       gapToFirst: '-1L',
       pitstops: '2' },
     { position: '25',
       name: 'Mike Bell',
       team: 'Cosmo Seiki Japan',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: '01:07:45.808',
       lapsCompleted: '46',
       gapToFirst: '-1L',
       pitstops: '3' },
     { position: '26',
       name: 'Jack Mayor',
       team: 'Mayor Downard Racing Team',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: 'DNF',
       lapsCompleted: '44',
       gapToFirst: 'DNF',
       pitstops: '3' },
     { position: '27',
       name: 'Cas Rietveld ',
       team: 'Draig Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: 'DNF',
       lapsCompleted: '12',
       gapToFirst: 'DNF',
       pitstops: '2' },
     { position: '28',
       name: 'Luke Maguire ',
       team: 'Scuderia Clay Geeli',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: 'DNF',
       lapsCompleted: '11',
       gapToFirst: 'DNF',
       pitstops: '0' },
     { position: '29',
       name: 'Mike Kwint',
       team: 'Satellite Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: 'DNF',
       lapsCompleted: '5',
       gapToFirst: 'DNF',
       pitstops: '1' },
     { position: '30',
       name: 'Thomas Andriamiharisoa',
       team: 'Royal Blue Racing',
       car: 'GPVWC Superleague Lights 2019',
       raceTime: 'DNF',
       lapsCompleted: '1',
       gapToFirst: 'DNF',
       pitstops: '0' } ] }
```
